chrome.runtime.onMessage.addListener(((e,o,s)=>{if("getSfHost"==e.message){const t=new URL(e.url).hostname;return chrome.cookies.get({url:e.url,name:"sid",storeId:o.tab.cookieStoreId},(e=>{if(!e||t.endsWith(".mcas.ms"))return void s(t);const[r]=e.value.split("!");["salesforce.com","cloudforce.com","salesforce.mil","cloudforce.mil","sfcrmproducts.cn"].forEach((e=>{chrome.cookies.getAll({name:"sid",domain:e,secure:!0,storeId:o.tab.cookieStoreId},(e=>{let o=e.find((e=>e.value.startsWith(r+"!")));o&&s(o.domain)}))}))})),!0}return"getSession"==e.message&&(sfHost=e.sfHost,chrome.cookies.get({url:"https://"+e.sfHost,name:"sid",storeId:o.tab.cookieStoreId},(e=>{if(!e)return void s(null);let o={key:e.value,hostname:e.domain};s(o)})),!0)}));